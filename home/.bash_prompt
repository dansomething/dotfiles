# https://github.com/magicmonty/bash-git-prompt
if [ -f "$(brew --prefix)/opt/bash-git-prompt/share/gitprompt.sh" ]; then
  GIT_PROMPT_ONLY_IN_REPO=0
  GIT_PROMPT_FETCH_REMOTE_STATUS=1
  GIT_PROMPT_THEME=Custom

  function prompt_callback {
      # Count running jobs
      if (( r = $(jobs -r | wc -l) )); then
          [[ -n "$ret" ]] && ret+='/'
          ret+=" ${r}&"
      fi

      # Count stopped jobs
      if (( s = $(jobs -s | wc -l) )); then
          [[ -n "$ret" ]] && ret+='/'
          ret+=" ${s}z"
      fi

      echo -nE "${Yellow}${ret}${ResetColor}"
  }

  source "$(brew --prefix)/opt/bash-git-prompt/share/gitprompt.sh"
  return 0
fi

# Fallback to custom bash prompt if necesary
source "$HOME/.bash_prompt_git"
